# ⚠️ 环境准备 - 必须先完成！

## 问题说明

如果运行 `安装依赖.bat` 后窗口立即关闭，说明你的电脑**没有安装 Node.js**。

Node.js 是运行 Vue 项目的必需环境（就像 Java 需要 JDK 一样）。

---

## 🚀 第一步：安装 Node.js

### 方法 1：官方网站下载（推荐）

#### 1. 访问官网
打开浏览器，访问：**https://nodejs.org/**

#### 2. 下载安装包
- 你会看到两个版本：
  - **LTS（长期支持版）** ← 选这个！推荐！
  - Current（最新版）
  
- 点击 **LTS** 版本的下载按钮（通常是 v18.x 或 v20.x）

#### 3. 运行安装程序
- 双击下载的 `.msi` 文件
- 安装向导中**全部使用默认选项**，一路点击 "下一步"
- 重要：勾选 ☑️ "Automatically install the necessary tools"（自动安装必要工具）
- 等待安装完成（约 2-3 分钟）

#### 4. 重启命令行
- **关闭所有已打开的 PowerShell/命令提示符窗口**
- 重新打开 PowerShell

#### 5. 验证安装
打开 PowerShell，输入：
```powershell
node -v
npm -v
```

如果看到版本号（如 `v18.19.0` 和 `9.2.0`），说明安装成功！✅

---

### 方法 2：使用 Scoop（可选，适合开发者）

如果你熟悉包管理器，可以使用 Scoop：

```powershell
# 1. 安装 Scoop（如果还没有）
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
irm get.scoop.sh | iex

# 2. 安装 Node.js
scoop install nodejs-lts

# 3. 验证
node -v
```

---

### 方法 3：使用 Chocolatey（可选）

如果你已经安装了 Chocolatey：

```powershell
# 以管理员身份运行 PowerShell
choco install nodejs-lts -y

# 验证
node -v
```

---

## 🎯 第二步：安装项目依赖

Node.js 安装成功后，继续以下步骤：

### 1. 双击运行
```
greenway-vue/安装依赖.bat
```

这次应该会看到：
```
[√] Node.js 版本: v18.19.0
[√] npm 版本: 9.2.0

步骤 1: 安装依赖包...
（开始下载依赖，约需 2-5 分钟）
```

### 2. 等待完成
安装过程可能需要几分钟，请耐心等待。你会看到：
- 下载进度条
- 安装的包名
- 最后显示 "安装完成！"

### 3. 复制数据文件
脚本会自动复制数据文件到 `public` 目录。

---

## 🚀 第三步：启动项目

依赖安装完成后：

### 1. 双击运行
```
greenway-vue/启动开发服务器.bat
```

### 2. 浏览器自动打开
浏览器会自动打开 `http://localhost:5173`，你应该能看到你的绿道系统！

---

## ❓ 常见问题

### Q1: 安装 Node.js 后还是提示"找不到 node"？

**解决方案**：
1. **完全关闭所有命令行窗口**（包括 VS Code 的终端）
2. 重新打开新的 PowerShell 窗口
3. 再次运行 `node -v` 验证

如果还是不行：
4. 重启电脑（让环境变量生效）

### Q2: npm install 很慢或失败？

**解决方案**：使用国内镜像

```powershell
# 进入项目目录
cd c:\Users\cheng\Desktop\tryyyyyy\greenway-vue

# 设置淘宝镜像
npm config set registry https://registry.npmmirror.com

# 手动安装
npm install
```

### Q3: 提示权限错误？

**解决方案**：以管理员身份运行

1. 右键点击 `安装依赖.bat`
2. 选择"以管理员身份运行"

### Q4: 安装过程中断或失败？

**解决方案**：清除缓存重试

```powershell
cd c:\Users\cheng\Desktop\tryyyyyy\greenway-vue

# 清除缓存
npm cache clean --force

# 删除旧的 node_modules（如果存在）
Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue

# 重新安装
npm install
```

---

## 🔍 手动安装步骤（如果批处理文件不工作）

如果批处理文件有问题，可以手动执行：

```powershell
# 1. 进入项目目录
cd c:\Users\cheng\Desktop\tryyyyyy\greenway-vue

# 2. 验证 Node.js
node -v
npm -v

# 3. 安装依赖
npm install

# 4. 复制数据文件
Copy-Item -Path "..\数据" -Destination ".\public\" -Recurse -Force

# 5. 启动开发服务器
npm run dev
```

---

## 📋 验证清单

完成安装后，确认以下项目：

- [ ] Node.js 已安装（`node -v` 显示版本号）
- [ ] npm 已安装（`npm -v` 显示版本号）
- [ ] 项目依赖已安装（存在 `node_modules` 文件夹）
- [ ] 数据文件已复制（存在 `public/数据` 文件夹）
- [ ] 开发服务器可以启动（浏览器打开 `http://localhost:5173`）

---

## 💡 推荐配置

安装完 Node.js 后，建议进行以下配置：

```powershell
# 1. 设置淘宝镜像（加速下载）
npm config set registry https://registry.npmmirror.com

# 2. 验证配置
npm config get registry

# 3. 更新 npm 到最新版（可选）
npm install -g npm@latest
```

---

## 📞 需要帮助？

如果按照以上步骤还是无法解决问题：

1. 截图错误信息
2. 复制完整的错误提示文字
3. 告诉我你在哪一步卡住了

我会帮你解决！

---

## 🎯 成功标志

当你看到这个界面，就说明成功了：

```
  VITE v5.0.0  ready in 500 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
  ➜  press h to show help
```

浏览器自动打开后，你应该能看到：
- 🌳 **北京绿道系统总览**页面
- 🗺️ 地图正常显示
- 🎨 界面美观，交互流畅

**恭喜！你已经成功启动 Vue 项目！** 🎉
